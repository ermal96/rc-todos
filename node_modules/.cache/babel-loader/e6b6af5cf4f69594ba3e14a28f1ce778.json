{"ast":null,"code":"import { Firestore, Firebase } from '../../config/firebase';\nimport { types } from './actionTypes';\nimport { SuccessMsg, ErrorMsg } from '../../utils/helpers/msg';\nexport const fetchUserProfile = () => async (dispatch, getState) => {\n  const userId = getState().firebase.user.uid;\n  Firestore.collection('users').doc(userId).get().then(res => {\n    dispatch({\n      type: types.FETCH_USER_PROFILE,\n      firstName: res.data().firstName,\n      lastName: res.data().lastName\n    });\n  });\n};\nexport const updateUser = data => async (dispatch, getState) => {\n  const userId = getState().firebase.user.uid;\n  const user = Firebase.auth().currentUser;\n\n  if (data.email) {\n    user.updateEmail(data.email).then(() => {\n      user.sendEmailVerification().then(() => {// Email sent.\n      }).catch(function (err) {\n        ErrorMsg(err.message);\n      });\n    }).catch(err => {\n      ErrorMsg(err.message);\n    });\n  }\n\n  Firestore.collection('users').doc(userId).get().then(res => {\n    dispatch({\n      type: types.FETCH_USER_PROFILE,\n      firstName: res.data().firstName,\n      lastName: res.data().lastName\n    });\n  });\n};","map":{"version":3,"sources":["/home/ermal/Documents/Personal/Projects/rc-todo/src/store/actions/profileActions.js"],"names":["Firestore","Firebase","types","SuccessMsg","ErrorMsg","fetchUserProfile","dispatch","getState","userId","firebase","user","uid","collection","doc","get","then","res","type","FETCH_USER_PROFILE","firstName","data","lastName","updateUser","auth","currentUser","email","updateEmail","sendEmailVerification","catch","err","message"],"mappings":"AAAA,SAAQA,SAAR,EAAmBC,QAAnB,QAAkC,uBAAlC;AACA,SAAQC,KAAR,QAAoB,eAApB;AACA,SAAQC,UAAR,EAAoBC,QAApB,QAAmC,yBAAnC;AAEA,OAAO,MAAMC,gBAAgB,GAAG,MAAM,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AAEhE,QAAMC,MAAM,GAAID,QAAQ,GAAGE,QAAX,CAAoBC,IAApB,CAAyBC,GAAzC;AAEAX,EAAAA,SAAS,CAACY,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCL,MAAlC,EAA0CM,GAA1C,GAAgDC,IAAhD,CAAqDC,GAAG,IAAI;AAExDV,IAAAA,QAAQ,CAAC;AACLW,MAAAA,IAAI,EAAEf,KAAK,CAACgB,kBADP;AAELC,MAAAA,SAAS,EAAEH,GAAG,CAACI,IAAJ,GAAWD,SAFjB;AAGLE,MAAAA,QAAQ,EAAEL,GAAG,CAACI,IAAJ,GAAWC;AAHhB,KAAD,CAAR;AAOH,GATD;AAWH,CAfM;AAkBP,OAAO,MAAMC,UAAU,GAAIF,IAAD,IAAU,OAAOd,QAAP,EAAiBC,QAAjB,KAA8B;AAE9D,QAAMC,MAAM,GAAID,QAAQ,GAAGE,QAAX,CAAoBC,IAApB,CAAyBC,GAAzC;AACA,QAAMD,IAAI,GAAGT,QAAQ,CAACsB,IAAT,GAAgBC,WAA7B;;AAGA,MAAGJ,IAAI,CAACK,KAAR,EAAc;AACVf,IAAAA,IAAI,CAACgB,WAAL,CAAiBN,IAAI,CAACK,KAAtB,EAA6BV,IAA7B,CAAkC,MAAO;AAErCL,MAAAA,IAAI,CAACiB,qBAAL,GAA6BZ,IAA7B,CAAkC,MAAM,CACpC;AACD,OAFH,EAEKa,KAFL,CAEW,UAASC,GAAT,EAAc;AACrBzB,QAAAA,QAAQ,CAACyB,GAAG,CAACC,OAAL,CAAR;AACD,OAJH;AAMD,KARH,EAQKF,KARL,CAQYC,GAAD,IAAS;AAChBzB,MAAAA,QAAQ,CAACyB,GAAG,CAACC,OAAL,CAAR;AACD,KAVH;AAWH;;AAID9B,EAAAA,SAAS,CAACY,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCL,MAAlC,EAA0CM,GAA1C,GAAgDC,IAAhD,CAAqDC,GAAG,IAAI;AAExDV,IAAAA,QAAQ,CAAC;AACLW,MAAAA,IAAI,EAAEf,KAAK,CAACgB,kBADP;AAELC,MAAAA,SAAS,EAAEH,GAAG,CAACI,IAAJ,GAAWD,SAFjB;AAGLE,MAAAA,QAAQ,EAAEL,GAAG,CAACI,IAAJ,GAAWC;AAHhB,KAAD,CAAR;AAOH,GATD;AAWH,CAjCM","sourcesContent":["import {Firestore, Firebase} from '../../config/firebase'\nimport {types} from './actionTypes';\nimport {SuccessMsg, ErrorMsg} from '../../utils/helpers/msg'\n\nexport const fetchUserProfile = () => async (dispatch, getState) => {\n\n    const userId  = getState().firebase.user.uid\n\n    Firestore.collection('users').doc(userId).get().then(res => {\n\n        dispatch({\n            type: types.FETCH_USER_PROFILE,\n            firstName: res.data().firstName,\n            lastName: res.data().lastName\n        })\n\n\n    })\n\n}\n\n\nexport const updateUser = (data) => async (dispatch, getState) => {\n\n    const userId  = getState().firebase.user.uid;\n    const user = Firebase.auth().currentUser;\n\n\n    if(data.email){\n        user.updateEmail(data.email).then(() =>  {\n            \n            user.sendEmailVerification().then(() => {\n                // Email sent.\n              }).catch(function(err) {\n                ErrorMsg(err.message)\n              });\n\n          }).catch((err) => {\n            ErrorMsg(err.message)\n          });\n    }\n\n    \n\n    Firestore.collection('users').doc(userId).get().then(res => {\n\n        dispatch({\n            type: types.FETCH_USER_PROFILE,\n            firstName: res.data().firstName,\n            lastName: res.data().lastName\n        })\n\n\n    })\n\n}"]},"metadata":{},"sourceType":"module"}