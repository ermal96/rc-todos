{"ast":null,"code":"import _regeneratorRuntime from\"/home/ermal/Documents/Personal/Projects/rc-todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/ermal/Documents/Personal/Projects/rc-todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/ermal/Documents/Personal/Projects/rc-todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Firestore}from'../../config/firebase';import{types}from'./actionTypes';import{SuccessMsg,ErrorMsg}from'../../utils/helpers/msg';// Add Todo\nexport var addTodo=function addTodo(newToDo){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Firestore.collection('todos').add(newToDo).then(function(docRef){var data=null;data=_objectSpread(_objectSpread({},newToDo),{},{id:docRef.id});dispatch({type:types.ADD_TODO,payload:data});SuccessMsg('Added successfully');}).catch(function(err){ErrorMsg(err.message);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};// Remove Todo\nexport var removeTodo=function removeTodo(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:Firestore.collection('todos').doc(id).delete().then(function(){SuccessMsg('Deleted successfully');dispatch({type:types.DELETE_TODO,payload:id});}).catch(function(err){ErrorMsg(err.message);});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// Move Todo\nexport var moveTodo=function moveTodo(id,status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:Firestore.collection('todos').doc(id).update({status:status}).then(function(){console.log(status);if(status==='ACTIVE'){SuccessMsg('Moved to todo ');}else if(status==='COMPLETED'){SuccessMsg('Moved to completed ');}dispatch({type:types.MOVE_TODO,payload:id});}).catch(function(err){ErrorMsg(err.message);});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};// Fetch active todos from firebase\nexport var fetchTodos=function fetchTodos(status){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var data,userId;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=[];userId=getState().firebase.user.uid;dispatch({type:types.FETCH_TODOS,loading:true});if(status){Firestore.collection('todos').where(\"status\",\"==\",status).where(\"userId\",\"==\",userId).orderBy('date','desc').get().then(function(res){res.forEach(function(item){var doc=_objectSpread(_objectSpread({},item.data()),{},{id:item.id});data.push(doc);});dispatch({type:types.FETCH_TODOS,payload:data,loading:false});});}else{Firestore.collection('todos').where(\"userId\",\"==\",userId).orderBy('date','desc').get().then(function(res){res.forEach(function(item){var doc=_objectSpread(_objectSpread({},item.data()),{},{id:item.id});data.push(doc);});dispatch({type:types.FETCH_TODOS,payload:data,loading:false});});}case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4,_x5){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/ermal/Documents/Personal/Projects/rc-todo/src/store/actions/todosActions.js"],"names":["Firestore","types","SuccessMsg","ErrorMsg","addTodo","newToDo","dispatch","collection","add","then","docRef","data","id","type","ADD_TODO","payload","catch","err","message","removeTodo","doc","delete","DELETE_TODO","moveTodo","status","update","console","log","MOVE_TODO","fetchTodos","getState","userId","firebase","user","uid","FETCH_TODOS","loading","where","orderBy","get","res","forEach","item","push"],"mappings":"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","sourcesContent":["import {Firestore} from '../../config/firebase'\nimport {types} from './actionTypes';\nimport {SuccessMsg, ErrorMsg} from '../../utils/helpers/msg'\n\n// Add Todo\nexport const addTodo = newToDo => async dispatch => {\n\n    Firestore.collection('todos').add(newToDo).then(docRef => {\n        let data = null\n        data = {\n            ...newToDo,\n            id: docRef.id\n        }\n         dispatch({\n            type: types.ADD_TODO, \n            payload: data,\n        });\n\n        SuccessMsg('Added successfully')\n\n    }).catch(err => {\n        ErrorMsg(err.message)\n    })\n\n};\n\n\n// Remove Todo\nexport const removeTodo = id => async dispatch => {\n    Firestore.collection('todos').doc(id).delete().then(() => {\n        SuccessMsg('Deleted successfully')\n        dispatch({\n            type: types.DELETE_TODO, \n            payload: id\n        });\n    }).catch((err) => {\n        ErrorMsg(err.message)\n    });\n\n\n};\n\n\n// Move Todo\nexport const moveTodo = (id, status) => async dispatch => {\n    Firestore.collection('todos').doc(id).update({status: status}).then(() => {\n        console.log(status)\n        if (status === 'ACTIVE') {\n            SuccessMsg('Moved to todo ')\n        } else if(status === 'COMPLETED') {\n            SuccessMsg('Moved to completed ')\n        }\n        dispatch({\n            type: types.MOVE_TODO, \n            payload: id\n        })\n    }).catch((err) => {\n        ErrorMsg(err.message)\n    });\n};\n\n\n// Fetch active todos from firebase\nexport const fetchTodos = (status) => async (dispatch, getState) => {\n\n    let data = [];\n\n    const userId = getState().firebase.user.uid;\n\n    dispatch({\n        type: types.FETCH_TODOS, \n        loading: true\n    });\n\n    if(status){\n        Firestore.collection('todos').where(\"status\", \"==\", status ).where(\"userId\", \"==\", userId).orderBy('date', 'desc').get().then(res => {  \n\n            res.forEach(item => {\n                const doc = {\n                    ...item.data(),\n                    id: item.id\n                };\n                data.push(doc);\n\n            })\n\n            dispatch({\n                type: types.FETCH_TODOS, \n                payload: data,\n                loading: false\n            });\n\n        })\n    } else{\n        Firestore.collection('todos').where(\"userId\", \"==\", userId).orderBy('date', 'desc').get().then(res => {  \n\n            res.forEach(item => {\n                const doc = {\n                    ...item.data(),\n                    id: item.id\n                };\n                data.push(doc);\n\n            })\n\n            dispatch({\n                type: types.FETCH_TODOS, \n                payload: data,\n                loading: false\n            });\n\n        })\n    }\n\n\n};\n"]},"metadata":{},"sourceType":"module"}