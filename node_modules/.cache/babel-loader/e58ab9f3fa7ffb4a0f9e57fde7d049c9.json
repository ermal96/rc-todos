{"ast":null,"code":"import _regeneratorRuntime from\"/home/ermal/Documents/Personal/Projects/rc-todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ermal/Documents/Personal/Projects/rc-todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Firebase}from'../../config/firebase';import{types}from'./actionTypes';import{SuccessMsg,ErrorMsg}from'../../utils/helpers/msg';export var register=function register(data){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Firebase.auth().createUserWithEmailAndPassword(data.email,data.password).then(function(res){var user=Firebase.auth().currentUser;user.updateProfile({displayName:data.displayName}).then(function(){user.sendEmailVerification().then(function(){SuccessMsg('Please verify your email');}).catch(function(err){ErrorMsg(err.message);});}).catch(function(err){ErrorMsg(err.message);});}).catch(function(err){ErrorMsg(err.message);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var login=function login(data){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:Firebase.auth().signInWithEmailAndPassword(data.email,data.password).then(function(res){SuccessMsg(\"Welcome \".concat(res.user.displayName));}).catch(function(err){ErrorMsg(err.message);});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var name;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:name=getState().firebase.user.displayName;Firebase.auth().signOut().then(function(){SuccessMsg('Bye '+name+' see you soon '+String.fromCharCode(0xD83D,0xDE04));dispatch({type:types.LOGOUT,payload:''});}).catch(function(err){ErrorMsg(err.message);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};export var initFirebase=function initFirebase(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:Firebase.auth().onAuthStateChanged(function(user){if(user){dispatch({type:types.LOGIN_SUCCESS,payload:user});}dispatch({type:types.FIREBASE_LOADED,payload:true});});case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5){return _ref4.apply(this,arguments);};}();};export var updateUser=function updateUser(data){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var user;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:user=Firebase.auth().currentUser;if(data.displayName||data.password||data.email){// update email if user provide a email && send email confirmation to user\nif(data.email){user.updateEmail(data.email).then(function(){user.sendEmailVerification().then(function(){dispatch({type:types.USER_EMAIL_UPDATED,payload:data.email});}).catch(function(err){ErrorMsg(err.message);});}).catch(function(err){ErrorMsg(err.message);});}//update password if user provide a password\nif(data.password){user.updatePassword(data.password).then(function(){dispatch({type:types.USER_PASSWORD_UPDATED});}).catch(function(err){ErrorMsg(err.message);});}// update name  if user provode it\nif(data.displayName){user.updateProfile({displayName:data.displayName}).then(function(){dispatch({type:types.USER_NAME_UPDATED,payload:data.displayName});}).catch(function(err){ErrorMsg(err.message);});}SuccessMsg('Successfully updated');}case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x6){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/ermal/Documents/Personal/Projects/rc-todo/src/store/actions/authActions.js"],"names":["Firebase","types","SuccessMsg","ErrorMsg","register","data","dispatch","auth","createUserWithEmailAndPassword","email","password","then","res","user","currentUser","updateProfile","displayName","sendEmailVerification","catch","err","message","login","signInWithEmailAndPassword","logout","getState","name","firebase","signOut","String","fromCharCode","type","LOGOUT","payload","initFirebase","onAuthStateChanged","LOGIN_SUCCESS","FIREBASE_LOADED","updateUser","updateEmail","USER_EMAIL_UPDATED","updatePassword","USER_PASSWORD_UPDATED","USER_NAME_UPDATED"],"mappings":"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","sourcesContent":["import {Firebase} from '../../config/firebase'\nimport {types} from './actionTypes';\nimport {SuccessMsg, ErrorMsg} from '../../utils/helpers/msg'\n\nexport const register = (data) => async dispatch => {\n    Firebase.auth().createUserWithEmailAndPassword(data.email, data.password).then((res) => {\n\n        const  user = Firebase.auth().currentUser;\n\n        user.updateProfile({\n            displayName: data.displayName,\n          }).then(() => {\n\n            user.sendEmailVerification().then(() => {\n                SuccessMsg('Please verify your email')\n            }).catch(function(err) {\n                ErrorMsg(err.message)\n            });\n            \n          }).catch(function(err) {\n            ErrorMsg(err.message)\n          });\n\n        \n    }).catch(err => {\n        ErrorMsg(err.message)\n    })\n}\n\n\nexport const login = (data) => async dispatch => {\n    Firebase.auth().signInWithEmailAndPassword(data.email, data.password).then((res) => {  \n        \n        SuccessMsg(`Welcome ${res.user.displayName}`)\n\n    }).catch(err => {\n        ErrorMsg(err.message)\n    })\n}\n\n\nexport const logout = () => async (dispatch, getState) => {\n\n    const name  = getState().firebase.user.displayName\n\n    Firebase.auth().signOut().then(() => {\n        SuccessMsg('Bye ' + name + ' see you soon ' +  String.fromCharCode(0xD83D, 0xDE04))\n        dispatch({\n            type: types.LOGOUT,\n            payload: ''\n        })\n    }).catch(err => {\n        ErrorMsg(err.message)\n    })\n}\n\nexport const initFirebase = () => async dispatch => {\n\n    Firebase.auth().onAuthStateChanged((user) => {\n        if (user) {\n            dispatch({\n                type: types.LOGIN_SUCCESS,\n                payload: user\n            })\n        }\n\n        dispatch({\n            type: types.FIREBASE_LOADED,\n            payload: true\n        })\n\n\n      });\n}\n\n\nexport const updateUser = (data) => async (dispatch) => {\n\n    const user = Firebase.auth().currentUser;\n\n\n    if(data.displayName || data.password || data.email ){\n\n        // update email if user provide a email && send email confirmation to user\n    if(data.email){\n        user.updateEmail(data.email).then(() =>  {\n            \n            user.sendEmailVerification().then(() => {\n                dispatch({\n                    type: types.USER_EMAIL_UPDATED,\n                    payload: data.email\n                })\n              }).catch(function(err) {\n                ErrorMsg(err.message)\n              });\n\n          }).catch((err) => {\n            ErrorMsg(err.message)\n          });\n    }\n\n\n    //update password if user provide a password\n    if(data.password){\n        user.updatePassword(data.password).then(() => {\n            dispatch({\n                type: types.USER_PASSWORD_UPDATED,\n            })\n          }).catch(function(err) {\n            ErrorMsg(err.message)\n          });\n    }\n\n\n    // update name  if user provode it\n    if(data.displayName){\n        user.updateProfile({\n            displayName: data.displayName,\n          }).then(() => {\n            dispatch({\n                type: types.USER_NAME_UPDATED,\n                payload: data.displayName\n            })\n          }).catch(function(err) {\n            ErrorMsg(err.message)\n          });\n    }\n\n\n\n        SuccessMsg('Successfully updated')\n\n    }\n\n\n\n\n\n}"]},"metadata":{},"sourceType":"module"}