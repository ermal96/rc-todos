{"ast":null,"code":"import { Firebase } from '../../config/firebase';\nimport { types } from './actionTypes';\nimport { SuccessMsg, ErrorMsg } from '../../utils/helpers/msg';\nexport const register = data => async dispatch => {\n  Firebase.auth().createUserWithEmailAndPassword(data.email, data.password).then(res => {\n    const user = Firebase.auth().currentUser;\n    user.updateProfile({\n      displayName: data.displayName\n    }).then(() => {\n      user.sendEmailVerification().then(() => {\n        SuccessMsg('Please verify your email');\n      }).catch(function (err) {\n        ErrorMsg(err.message);\n      });\n    }).catch(function (err) {\n      ErrorMsg(err.message);\n    });\n  }).catch(err => {\n    ErrorMsg(err.message);\n  });\n};\nexport const login = data => async dispatch => {\n  Firebase.auth().signInWithEmailAndPassword(data.email, data.password).then(res => {\n    SuccessMsg(`Welcome ${res.user.displayName}`);\n  }).catch(err => {\n    ErrorMsg(err.message);\n  });\n};\nexport const logout = () => async (dispatch, getState) => {\n  const name = getState().firebase.user.displayName;\n  Firebase.auth().signOut().then(() => {\n    SuccessMsg('Bye ' + name + ' see you soon ' + String.fromCharCode(0xD83D, 0xDE04));\n    dispatch({\n      type: types.LOGOUT,\n      payload: ''\n    });\n  }).catch(err => {\n    ErrorMsg(err.message);\n  });\n};\nexport const initFirebase = () => async dispatch => {\n  Firebase.auth().onAuthStateChanged(user => {\n    if (user) {\n      dispatch({\n        type: types.LOGIN_SUCCESS,\n        payload: user\n      });\n    }\n\n    dispatch({\n      type: types.FIREBASE_LOADED,\n      payload: true\n    });\n  });\n};\nexport const updateUser = data => async dispatch => {\n  const user = Firebase.auth().currentUser;\n\n  if (data.displayName || data.password || data.email) {\n    // update email if user provide a email && send email confirmation to user\n    if (data.email) {\n      user.updateEmail(data.email).then(() => {\n        user.sendEmailVerification().then(() => {\n          dispatch({\n            type: types.USER_EMAIL_UPDATED,\n            payload: data.email\n          });\n        }).catch(function (err) {\n          ErrorMsg(err.message);\n        });\n      }).catch(err => {\n        ErrorMsg(err.message);\n      });\n    } //update password if user provide a password\n\n\n    if (data.password) {\n      user.updatePassword(data.password).then(() => {\n        dispatch({\n          type: types.USER_PASSWORD_UPDATED\n        });\n      }).catch(function (err) {\n        ErrorMsg(err.message);\n      });\n    } // update name  if user provode it\n\n\n    if (data.displayName) {\n      user.updateProfile({\n        displayName: data.displayName\n      }).then(() => {\n        dispatch({\n          type: types.USER_NAME_UPDATED,\n          payload: data.displayName\n        });\n      }).catch(function (err) {\n        ErrorMsg(err.message);\n      });\n    }\n\n    SuccessMsg('Successfully updated');\n  }\n};","map":{"version":3,"sources":["/home/ermal/Documents/Personal/Projects/rc-todo/src/store/actions/authActions.js"],"names":["Firebase","types","SuccessMsg","ErrorMsg","register","data","dispatch","auth","createUserWithEmailAndPassword","email","password","then","res","user","currentUser","updateProfile","displayName","sendEmailVerification","catch","err","message","login","signInWithEmailAndPassword","logout","getState","name","firebase","signOut","String","fromCharCode","type","LOGOUT","payload","initFirebase","onAuthStateChanged","LOGIN_SUCCESS","FIREBASE_LOADED","updateUser","updateEmail","USER_EMAIL_UPDATED","updatePassword","USER_PASSWORD_UPDATED","USER_NAME_UPDATED"],"mappings":"AAAA,SAAQA,QAAR,QAAuB,uBAAvB;AACA,SAAQC,KAAR,QAAoB,eAApB;AACA,SAAQC,UAAR,EAAoBC,QAApB,QAAmC,yBAAnC;AAEA,OAAO,MAAMC,QAAQ,GAAIC,IAAD,IAAU,MAAMC,QAAN,IAAkB;AAChDN,EAAAA,QAAQ,CAACO,IAAT,GAAgBC,8BAAhB,CAA+CH,IAAI,CAACI,KAApD,EAA2DJ,IAAI,CAACK,QAAhE,EAA0EC,IAA1E,CAAgFC,GAAD,IAAS;AAEpF,UAAOC,IAAI,GAAGb,QAAQ,CAACO,IAAT,GAAgBO,WAA9B;AAEAD,IAAAA,IAAI,CAACE,aAAL,CAAmB;AACfC,MAAAA,WAAW,EAAEX,IAAI,CAACW;AADH,KAAnB,EAEKL,IAFL,CAEU,MAAM;AAEZE,MAAAA,IAAI,CAACI,qBAAL,GAA6BN,IAA7B,CAAkC,MAAM;AACpCT,QAAAA,UAAU,CAAC,0BAAD,CAAV;AACH,OAFD,EAEGgB,KAFH,CAES,UAASC,GAAT,EAAc;AACnBhB,QAAAA,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAR;AACH,OAJD;AAMD,KAVH,EAUKF,KAVL,CAUW,UAASC,GAAT,EAAc;AACrBhB,MAAAA,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAR;AACD,KAZH;AAeH,GAnBD,EAmBGF,KAnBH,CAmBSC,GAAG,IAAI;AACZhB,IAAAA,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAR;AACH,GArBD;AAsBH,CAvBM;AA0BP,OAAO,MAAMC,KAAK,GAAIhB,IAAD,IAAU,MAAMC,QAAN,IAAkB;AAC7CN,EAAAA,QAAQ,CAACO,IAAT,GAAgBe,0BAAhB,CAA2CjB,IAAI,CAACI,KAAhD,EAAuDJ,IAAI,CAACK,QAA5D,EAAsEC,IAAtE,CAA4EC,GAAD,IAAS;AAEhFV,IAAAA,UAAU,CAAE,WAAUU,GAAG,CAACC,IAAJ,CAASG,WAAY,EAAjC,CAAV;AAEH,GAJD,EAIGE,KAJH,CAISC,GAAG,IAAI;AACZhB,IAAAA,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAR;AACH,GAND;AAOH,CARM;AAWP,OAAO,MAAMG,MAAM,GAAG,MAAM,OAAOjB,QAAP,EAAiBkB,QAAjB,KAA8B;AAEtD,QAAMC,IAAI,GAAID,QAAQ,GAAGE,QAAX,CAAoBb,IAApB,CAAyBG,WAAvC;AAEAhB,EAAAA,QAAQ,CAACO,IAAT,GAAgBoB,OAAhB,GAA0BhB,IAA1B,CAA+B,MAAM;AACjCT,IAAAA,UAAU,CAAC,SAASuB,IAAT,GAAgB,gBAAhB,GAAoCG,MAAM,CAACC,YAAP,CAAoB,MAApB,EAA4B,MAA5B,CAArC,CAAV;AACAvB,IAAAA,QAAQ,CAAC;AACLwB,MAAAA,IAAI,EAAE7B,KAAK,CAAC8B,MADP;AAELC,MAAAA,OAAO,EAAE;AAFJ,KAAD,CAAR;AAIH,GAND,EAMGd,KANH,CAMSC,GAAG,IAAI;AACZhB,IAAAA,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAR;AACH,GARD;AASH,CAbM;AAeP,OAAO,MAAMa,YAAY,GAAG,MAAM,MAAM3B,QAAN,IAAkB;AAEhDN,EAAAA,QAAQ,CAACO,IAAT,GAAgB2B,kBAAhB,CAAoCrB,IAAD,IAAU;AACzC,QAAIA,IAAJ,EAAU;AACNP,MAAAA,QAAQ,CAAC;AACLwB,QAAAA,IAAI,EAAE7B,KAAK,CAACkC,aADP;AAELH,QAAAA,OAAO,EAAEnB;AAFJ,OAAD,CAAR;AAIH;;AAEDP,IAAAA,QAAQ,CAAC;AACLwB,MAAAA,IAAI,EAAE7B,KAAK,CAACmC,eADP;AAELJ,MAAAA,OAAO,EAAE;AAFJ,KAAD,CAAR;AAMD,GAdH;AAeH,CAjBM;AAoBP,OAAO,MAAMK,UAAU,GAAIhC,IAAD,IAAU,MAAOC,QAAP,IAAoB;AAEpD,QAAMO,IAAI,GAAGb,QAAQ,CAACO,IAAT,GAAgBO,WAA7B;;AAGA,MAAGT,IAAI,CAACW,WAAL,IAAoBX,IAAI,CAACK,QAAzB,IAAqCL,IAAI,CAACI,KAA7C,EAAoD;AAEhD;AACJ,QAAGJ,IAAI,CAACI,KAAR,EAAc;AACVI,MAAAA,IAAI,CAACyB,WAAL,CAAiBjC,IAAI,CAACI,KAAtB,EAA6BE,IAA7B,CAAkC,MAAO;AAErCE,QAAAA,IAAI,CAACI,qBAAL,GAA6BN,IAA7B,CAAkC,MAAM;AACpCL,UAAAA,QAAQ,CAAC;AACLwB,YAAAA,IAAI,EAAE7B,KAAK,CAACsC,kBADP;AAELP,YAAAA,OAAO,EAAE3B,IAAI,CAACI;AAFT,WAAD,CAAR;AAID,SALH,EAKKS,KALL,CAKW,UAASC,GAAT,EAAc;AACrBhB,UAAAA,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAR;AACD,SAPH;AASD,OAXH,EAWKF,KAXL,CAWYC,GAAD,IAAS;AAChBhB,QAAAA,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAR;AACD,OAbH;AAcH,KAlBmD,CAqBpD;;;AACA,QAAGf,IAAI,CAACK,QAAR,EAAiB;AACbG,MAAAA,IAAI,CAAC2B,cAAL,CAAoBnC,IAAI,CAACK,QAAzB,EAAmCC,IAAnC,CAAwC,MAAM;AAC1CL,QAAAA,QAAQ,CAAC;AACLwB,UAAAA,IAAI,EAAE7B,KAAK,CAACwC;AADP,SAAD,CAAR;AAGD,OAJH,EAIKvB,KAJL,CAIW,UAASC,GAAT,EAAc;AACrBhB,QAAAA,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAR;AACD,OANH;AAOH,KA9BmD,CAiCpD;;;AACA,QAAGf,IAAI,CAACW,WAAR,EAAoB;AAChBH,MAAAA,IAAI,CAACE,aAAL,CAAmB;AACfC,QAAAA,WAAW,EAAEX,IAAI,CAACW;AADH,OAAnB,EAEKL,IAFL,CAEU,MAAM;AACZL,QAAAA,QAAQ,CAAC;AACLwB,UAAAA,IAAI,EAAE7B,KAAK,CAACyC,iBADP;AAELV,UAAAA,OAAO,EAAE3B,IAAI,CAACW;AAFT,SAAD,CAAR;AAID,OAPH,EAOKE,KAPL,CAOW,UAASC,GAAT,EAAc;AACrBhB,QAAAA,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAR;AACD,OATH;AAUH;;AAIGlB,IAAAA,UAAU,CAAC,sBAAD,CAAV;AAEH;AAMJ,CA9DM","sourcesContent":["import {Firebase} from '../../config/firebase'\nimport {types} from './actionTypes';\nimport {SuccessMsg, ErrorMsg} from '../../utils/helpers/msg'\n\nexport const register = (data) => async dispatch => {\n    Firebase.auth().createUserWithEmailAndPassword(data.email, data.password).then((res) => {\n\n        const  user = Firebase.auth().currentUser;\n\n        user.updateProfile({\n            displayName: data.displayName,\n          }).then(() => {\n\n            user.sendEmailVerification().then(() => {\n                SuccessMsg('Please verify your email')\n            }).catch(function(err) {\n                ErrorMsg(err.message)\n            });\n            \n          }).catch(function(err) {\n            ErrorMsg(err.message)\n          });\n\n        \n    }).catch(err => {\n        ErrorMsg(err.message)\n    })\n}\n\n\nexport const login = (data) => async dispatch => {\n    Firebase.auth().signInWithEmailAndPassword(data.email, data.password).then((res) => {  \n        \n        SuccessMsg(`Welcome ${res.user.displayName}`)\n\n    }).catch(err => {\n        ErrorMsg(err.message)\n    })\n}\n\n\nexport const logout = () => async (dispatch, getState) => {\n\n    const name  = getState().firebase.user.displayName\n\n    Firebase.auth().signOut().then(() => {\n        SuccessMsg('Bye ' + name + ' see you soon ' +  String.fromCharCode(0xD83D, 0xDE04))\n        dispatch({\n            type: types.LOGOUT,\n            payload: ''\n        })\n    }).catch(err => {\n        ErrorMsg(err.message)\n    })\n}\n\nexport const initFirebase = () => async dispatch => {\n\n    Firebase.auth().onAuthStateChanged((user) => {\n        if (user) {\n            dispatch({\n                type: types.LOGIN_SUCCESS,\n                payload: user\n            })\n        }\n\n        dispatch({\n            type: types.FIREBASE_LOADED,\n            payload: true\n        })\n\n\n      });\n}\n\n\nexport const updateUser = (data) => async (dispatch) => {\n\n    const user = Firebase.auth().currentUser;\n\n\n    if(data.displayName || data.password || data.email ){\n\n        // update email if user provide a email && send email confirmation to user\n    if(data.email){\n        user.updateEmail(data.email).then(() =>  {\n            \n            user.sendEmailVerification().then(() => {\n                dispatch({\n                    type: types.USER_EMAIL_UPDATED,\n                    payload: data.email\n                })\n              }).catch(function(err) {\n                ErrorMsg(err.message)\n              });\n\n          }).catch((err) => {\n            ErrorMsg(err.message)\n          });\n    }\n\n\n    //update password if user provide a password\n    if(data.password){\n        user.updatePassword(data.password).then(() => {\n            dispatch({\n                type: types.USER_PASSWORD_UPDATED,\n            })\n          }).catch(function(err) {\n            ErrorMsg(err.message)\n          });\n    }\n\n\n    // update name  if user provode it\n    if(data.displayName){\n        user.updateProfile({\n            displayName: data.displayName,\n          }).then(() => {\n            dispatch({\n                type: types.USER_NAME_UPDATED,\n                payload: data.displayName\n            })\n          }).catch(function(err) {\n            ErrorMsg(err.message)\n          });\n    }\n\n\n\n        SuccessMsg('Successfully updated')\n\n    }\n\n\n\n\n\n}"]},"metadata":{},"sourceType":"module"}