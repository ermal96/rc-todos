{"ast":null,"code":"import { Firebase, Firestore } from '../../config/firebase';\nimport { types } from './actionTypes';\nimport { SuccessMsg, ErrorMsg } from '../../utils/helpers/msg';\nexport const register = data => async dispatch => {\n  Firebase.auth().createUserWithEmailAndPassword(data.email, data.password).then(res => {\n    const user = Firebase.auth().currentUser;\n    user.updateProfile({\n      displayName: data.displayName\n    }).then(() => {\n      user.sendEmailVerification().then(() => {\n        SuccessMsg('Please verify your email');\n      }).catch(function (err) {\n        ErrorMsg(err.message);\n      });\n    }).catch(function (err) {\n      ErrorMsg(err.message);\n    });\n  }).catch(err => {\n    ErrorMsg(err.message);\n  });\n};\nexport const login = data => async dispatch => {\n  Firebase.auth().signInWithEmailAndPassword(data.email, data.password).then(res => {\n    const userId = res.user.uid;\n    Firestore.collection('users').doc(userId).get().then(res => {\n      const name = res.data().firstName;\n      SuccessMsg(`Welcome ${name}`);\n    });\n  }).catch(err => {\n    ErrorMsg(err.message);\n  });\n};\nexport const logout = () => async (dispatch, getState) => {\n  const userId = getState().firebase.user.uid;\n  Firestore.collection('users').doc(userId).get().then(res => {\n    const name = res.data().firstName;\n    Firebase.auth().signOut().then(() => {\n      SuccessMsg('Bye ' + name + ' see you soon ' + String.fromCharCode(0xD83D, 0xDE04));\n      dispatch({\n        type: types.LOGOUT,\n        payload: ''\n      });\n    }).catch(err => {\n      ErrorMsg(err.message);\n    });\n  });\n};\nexport const initFirebase = () => async dispatch => {\n  Firebase.auth().onAuthStateChanged(user => {\n    if (user) {\n      dispatch({\n        type: types.LOGIN_SUCCESS,\n        payload: user\n      });\n    }\n\n    dispatch({\n      type: types.FIREBASE_LOADED,\n      payload: true\n    });\n  });\n};\nexport const updateUser = data => async (dispatch, getState) => {\n  const userId = getState().firebase.user.uid;\n  const user = Firebase.auth().currentUser; // upddate email and send email confirmation to user\n\n  if (data.email) {\n    user.updateEmail(data.email).then(() => {\n      user.sendEmailVerification().then(() => {// Email sent.\n      }).catch(function (err) {\n        ErrorMsg(err.message);\n      });\n    }).catch(err => {\n      ErrorMsg(err.message);\n    });\n  }\n\n  if (data.password) {\n    user.updatePassword(data.password).then(() => {// Update successful.\n    }).catch(function (err) {\n      ErrorMsg(err.message);\n    });\n  }\n\n  Firestore.collection('users').doc(userId).get().then(res => {\n    dispatch({\n      type: types.FETCH_USER_PROFILE,\n      firstName: res.data().firstName,\n      lastName: res.data().lastName\n    });\n  });\n};","map":{"version":3,"sources":["/home/ermal/Documents/Personal/Projects/rc-todo/src/store/actions/authActions.js"],"names":["Firebase","Firestore","types","SuccessMsg","ErrorMsg","register","data","dispatch","auth","createUserWithEmailAndPassword","email","password","then","res","user","currentUser","updateProfile","displayName","sendEmailVerification","catch","err","message","login","signInWithEmailAndPassword","userId","uid","collection","doc","get","name","firstName","logout","getState","firebase","signOut","String","fromCharCode","type","LOGOUT","payload","initFirebase","onAuthStateChanged","LOGIN_SUCCESS","FIREBASE_LOADED","updateUser","updateEmail","updatePassword","FETCH_USER_PROFILE","lastName"],"mappings":"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","sourcesContent":["import {Firebase, Firestore} from '../../config/firebase'\nimport {types} from './actionTypes';\nimport {SuccessMsg, ErrorMsg} from '../../utils/helpers/msg'\n\nexport const register = (data) => async dispatch => {\n    Firebase.auth().createUserWithEmailAndPassword(data.email, data.password).then((res) => {\n\n        const  user = Firebase.auth().currentUser;\n\n        user.updateProfile({\n            displayName: data.displayName,\n          }).then(() => {\n\n            user.sendEmailVerification().then(() => {\n                SuccessMsg('Please verify your email')\n            }).catch(function(err) {\n                ErrorMsg(err.message)\n            });\n            \n          }).catch(function(err) {\n            ErrorMsg(err.message)\n          });\n\n\n        \n    }).catch(err => {\n        ErrorMsg(err.message)\n    })\n}\n\n\nexport const login = (data) => async dispatch => {\n    Firebase.auth().signInWithEmailAndPassword(data.email, data.password).then((res) => {  \n        const userId = res.user.uid;\n\n        Firestore.collection('users').doc(userId).get().then(res => {\n            const name  = res.data().firstName\n            SuccessMsg(`Welcome ${name}`)\n        })\n       \n    }).catch(err => {\n        ErrorMsg(err.message)\n    })\n}\n\n\nexport const logout = () => async (dispatch, getState) => {\n\n    const userId  = getState().firebase.user.uid\n\n    Firestore.collection('users').doc(userId).get().then(res => {\n\n        const name  = res.data().firstName\n\n        Firebase.auth().signOut().then(() => {\n            SuccessMsg('Bye ' + name + ' see you soon ' +  String.fromCharCode(0xD83D, 0xDE04))\n            dispatch({\n                type: types.LOGOUT,\n                payload: ''\n            })\n        }).catch(err => {\n            ErrorMsg(err.message)\n        })\n\n\n    })\n\n\n}\n\nexport const initFirebase = () => async dispatch => {\n\n    Firebase.auth().onAuthStateChanged((user) => {\n        if (user) {\n            dispatch({\n                type: types.LOGIN_SUCCESS,\n                payload: user\n            })\n        }\n\n        dispatch({\n            type: types.FIREBASE_LOADED,\n            payload: true\n        })\n\n\n      });\n}\n\n\n\n\nexport const updateUser = (data) => async (dispatch, getState) => {\n\n    const userId  = getState().firebase.user.uid;\n    const user = Firebase.auth().currentUser;\n\n\n    // upddate email and send email confirmation to user\n    if(data.email){\n        user.updateEmail(data.email).then(() =>  {\n            \n            user.sendEmailVerification().then(() => {\n                // Email sent.\n              }).catch(function(err) {\n                ErrorMsg(err.message)\n              });\n\n          }).catch((err) => {\n            ErrorMsg(err.message)\n          });\n    }\n\n\n    if(data.password){\n        user.updatePassword(data.password).then(() => {\n            // Update successful.\n          }).catch(function(err) {\n            ErrorMsg(err.message)\n          });\n    }\n\n    \n\n    Firestore.collection('users').doc(userId).get().then(res => {\n\n        dispatch({\n            type: types.FETCH_USER_PROFILE,\n            firstName: res.data().firstName,\n            lastName: res.data().lastName\n        })\n\n\n    })\n\n}"]},"metadata":{},"sourceType":"module"}